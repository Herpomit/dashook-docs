openapi: 3.0.3
info:
  title: Dashook API Docs
  description: API route for logging in users via email and password.
  version: 1.0.0

paths:
  /api/login:
    post:
      tags:
        - auth
      summary: User Login
      description: Logs in a user and returns an API key or user data if successful.
      operationId: loginUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  format: password
                  example: password
      responses:
        "200":
          description: Successful login
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: string
                    example: "dashook_****"
                    description: The decrypted API key string.
        "400":
          description: Missing or invalid input
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: Email and password are required.
        "403":
          description: Inactive user
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: User is not active
        "404":
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: User not found
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: An unexpected error occurred.
  /api/user/info:
    post:
      tags:
        - user
      summary: Get User Info
      description: Returns user data based on the provided API key in the headers.
      operationId: getUserInfo
      requestBody:
        required: false
      responses:
        "200":
          description: User information retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: User Found!
                  data:
                    type: object
                    properties:
                      uuid:
                        type: string
                        format: uuid
                        example: "559a3c1a-f54c-47ef-b49f-XXXX"
                      email:
                        type: string
                        example: user@example.com
                      username:
                        type: string
                        example: user123
                      isActive:
                        type: boolean
                        example: true
        "401":
          description: Unauthorized - token missing or invalid
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Unauthorized - token missing
        "404":
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: User not Found!
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Internal Server Error
